<!DOCTYPE html>
<html lang="en">

<head>
        <!-- META TAGS -->
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>C Programming Discussion</title>
        <script src="/js/jquery-1.9.1.min.js"></script>
        <script src="js/login.js"></script>
        <!-- Style Sheet-->
        <link rel='stylesheet' id='bootstrap-css-css' href='css/bootstrap5152.css?ver=1.0' type='text/css' media='all' />
        <link rel='stylesheet' id='responsive-css-css' href='css/responsive5152.css?ver=1.0' type='text/css' media='all' />
        <link rel='stylesheet' id='main-css-css' href='css/main5152.css?ver=1.0' type='text/css' media='all' />

        <![endif]-->

</head>
<body>
<!-- Start of Header -->
<div class="header-wrapper">
    <header>
        <div class="container">
            <div class="logo-container">
                <!-- Website Logo -->
                <a href="/" title="C-Discussion">
                    <img src="images/logo.png" alt="logo">
                </a>
                <span class="tag-line">C Programming Discussion</span>
            </div>
            <!-- Start of Main Navigation -->
            <nav class="main-nav">
                <div class="menu-top-menu-container" id="cssmenu">
                    <ul id="headerrul1" class="clearfix" style="text-align:right;">
                        <li><a href="/">Home</a></li>
                        <li><a href="articles-list">Articles List</a></li>
                        <li><a href="contact">Contact</a></li>
                    </ul>
                    <ul id="headerul2">
                        <li id='login'class="current-menu-item"><a href="login"> LOG IN</a></li>
                        <li id='reg'><a href="reg">Register</a></li>
                        <li id="logout" onclick="logoutFuc();" style="font-size: 20px;cursor: pointer; "></li>
                    </ul>
                </div>
            </nav>
            <!-- End of Main Navigation -->
            <script>
                $(function () {
                    var result;
                    $.ajax({
                        type: "GET",
                        url: "/login/getcookie",
                        dataType: 'text',
                        async: false,
                        data: {},
                        success: function (data) {

                            result = data;
                            if (result) {
                                $('#login').hide();
                                $('#reg').hide();
                                $('#logout').text(result+" logout ");
                            } else {
                                $('#logout').hide();
                            }
                        }
                    });
                });
                function logoutFuc() {
                    var result;
                    $.ajax({
                        type: "GET",
                        url: "/logout",
                        dataType: 'text',
                        async: false,
                        data: {},
                        success: function (data) {
                            result = data;
                        }
                    });
                    if (result === "true") {
                        location.reload();
                    }
                }
            </script>
        </div>
    </header>
</div>
<!-- End of Header -->

<!-- Start of Page Container -->
<div class="page-container">
    <div class="container">
        <div class="row">
            <!-- start of sidebar -->
            <aside class="span5 page-sidebar">
                <section class="widget">
                </section>
            </aside>

            <div class="span5 page-content">

                <article class="type-page hentry clearfix">
                    <h1 class="post-title">
                        Log in
                    </h1>
                </article>

                <form  class="row" method="POST">

                    <div class="span2">
                        <label for="name">Your Username <span>*</span> </label>

                    </div>
                    <div class="span6">

                        <input  required type="text" name="userName" id="loginName" class="" style="width:270px;" title="* Please provide your username">

                    </div>

                    <div class="span2">
                        <label for="Password">Password <span>*</span></label>
                    </div>
                    <div class="span6">

                        <input required type="password" name="password" id="loginPassword" style="width:270px;"  value=""title="* Please provide your password">


                    </div>
                   <div class="span3 ">
                        <input type="button" value="log in" onclick="LogInForm();" id="login" class="btn" style="width: 285px;height:40px ; font-size: medium;color:white;background: black"/>
                        <script>
                            function LogInForm() {
                                //alert('dddd');
                                var userName = document.getElementById("loginName").value;

                                var password = document.getElementById("loginPassword").value;

                                if (userName.length <= 0) {
                                    alert("input your username");
                                    return false;
                                }
                                if (password.length > 16 || password.length<3) {
                                    alert("You need to type passwords between 3 and 16 characters!");
                                    return false;
                                }
                                // alert(password);
                                var result;
                                $.ajax({
                                    type: "POST",
                                    url : "/login",
                                    dataType: 'json',
                                    async : false,
                                    data:{"userName":userName, "password":password},
                                    success: function(data,status) {
                                        if(status == 'success'){
                                            alert('log in successfully...');
                                            location.href = '/';
                                        }
                                    },
                                    error: function(data,status){
                                        if(status == 'error'){
                                            alert('username or password error!');
                                            location.reload();
                                        }
                                    }
                                });

                            }

                        </script>

                    </div>

                </form>

                <div class="panel-footer ">
                    Don't have an account! <a href="#" onclick="javascript:window.location.href='/reg'"> Sign
                    Up Here </a>
                </div>
            </div>

            <!-- end of page content -->
        </div>
    </div>
</div>

<footer id="footer-wrapper">
    <div id="footer" class="container">
        <div class="row">

            <div class="span4">
                <section class="widget">
                    <h3 class="title">Contact us</h3>
                    <div class="textwidget">
                    </div>
                </section>
            </div>

            <div class="span4">
                <section class="widget">
                    <h3 class="title">Categories</h3>
                    <ul>

                    </ul>
                </section>
            </div>

            <div class="span4">
                <section class="widget">
                    <h3 class="title">About</h3>
                    <div id="twitter_update_list">
                        <ul>
                            <li>No Tweets loaded !</li>
                        </ul>
                    </div>

                </section>
            </div>

        </div>
    </div>
    <!-- end of #footer -->
    <!-- Footer Bottom -->
    <div id="footer-bottom-wrapper">
        <div id="footer-bottom" class="container">
            <div class="row">
                <div class="span6">
                    <p class="copyright">
                        Copyright Â© 2017. All Rights Reserved by Xiaorui.
                    </p>
                </div>
                <div class="span6">
                    <!-- Social Navigation -->
                    <ul class="social-nav clearfix">
                        <li class="linkedin"><a target="_blank" href="#"></a></li>
                        <li class="stumble"><a target="_blank" href="#"></a></li>
                        <li class="google"><a target="_blank" href="#"></a></li>
                        <li class="deviantart"><a target="_blank" href="#"></a></li>
                        <li class="flickr"><a target="_blank" href="#"></a></li>
                        <li class="skype"><a target="_blank" href="skype:#?call"></a></li>
                        <li class="rss"><a target="_blank" href="#"></a></li>
                        <li class="twitter"><a target="_blank" href="#"></a></li>
                        <li class="facebook"><a target="_blank" href="#"></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Footer Bottom -->
</footer>
<!-- End of Footer -->
</body>
</html>